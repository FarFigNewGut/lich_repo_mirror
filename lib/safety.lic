#Safety.lic

module Safety
  def self.unsafe?
    danger = 0
    count = GameObj.targets.count
    GameObj.targets.each { |target|
      if target.name =~ /shaper/
        danger += 1
      end
    }

    if danger >= 2
      _respond "\<preset id=\"speech\"\>" + "There are #{count} targets." + "\<\/preset\>"
      return true
    else
      _respond "\<preset id=\"speech\"\>" + "There are #{count} targets." + "\<\/preset\>"
      return false
    end
  end
end #End of module


#Spell[1030].force_incant if Safety.unsafe?
if Safety.unsafe?
  Spell[1030].force_incant if Spell[1030].affordable?
else
  _respond "\<preset id=\"speech\"\>" + "Threat level acceptable." + "\<\/preset\>"
end