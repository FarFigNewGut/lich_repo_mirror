echo 'Graveyard gate set to always PUSH!!'
Room[Room.ids_from_uid(18002).first].timeto[Room.ids_from_uid(18062).first.to_s] = StringProc.new("if Skills.climbing >= [XMLData.encumbrance_value/1.25,101].max; 3.0; else; nil; end")
Room[Room.ids_from_uid(18002).first].wayto[Room.ids_from_uid(18062).first.to_s] = StringProc.new(
  <<~MyWayto
    if dothistimeout('go bronze gate', 5, /^The bronze gate appears to be closed\\.$|^Obvious (?:paths|exits)\\: northeast, northwest, up$/) =~ /^Obvious/
      $go2_restart = true
    else
      empty_hands
      move 'climb gate'
    end
  MyWayto
)
Room[Room.ids_from_uid(18002).first].timeto[Room.ids_from_uid(18003).first.to_s] = 30.0
Room[Room.ids_from_uid(18002).first].wayto[Room.ids_from_uid(18003).first.to_s] = StringProc.new(
  <<~MyWayto
    spell_list = [407, 1604, 304, 1207]
    cast_attempted = false
    until dothistimeout('go bronze gate', 5, /^The bronze gate appears to be closed\\.$|^Obvious (?:paths|exits)\\: northeast, northwest, up$/) =~ /^Obvious/
      if (spell_num = spell_list.find { |num| Spell[num].known? }) && !cast_attempted
        cast_attempted = true
        spell = Spell[spell_num]
        break unless spell.affordable?
        spell.cast('bronze gate')
      else
        empty_hands
        dothistimeout('push bronze gate', 16, /^(?:With a shocking lack of resistance, t|T)he (?:huge )?(?:bronze )?gate .* open|^The ancient hinges of the gate creak loudly as they give way|^Summoning the power .*? gate opens|the gate slowly opens wide enough to allow passage|The bronze gate pops open|^It's opened wide enough to slip through now\\. That thick chain won't let it open any farther\\.$|just (came|went) through a massive bronze gate\\.$/)
        fill_hands
      end
    end
  MyWayto
)

Room[Room.ids_from_uid(18003).first].timeto[Room.ids_from_uid(18002).first.to_s] = 30.0
Room[Room.ids_from_uid(18003).first].wayto[Room.ids_from_uid(18002).first.to_s] = StringProc.new(
  <<~MyWayto
    spell_list = [407, 1604, 304, 1207]
    cast_attempted = false
    until dothistimeout('go bronze gate', 5, /^The bronze gate appears to be closed\\.$|^Obvious (?:paths|exits)\\: none$/) =~ /^Obvious/
      if (spell_num = spell_list.find { |num| Spell[num].known? }) && !cast_attempted
        cast_attempted = true
        spell = Spell[spell_num]
        break unless spell.affordable?
        spell.cast('bronze gate')
      else
        empty_hands
        dothistimeout('push bronze gate', 16, /^(?:With a shocking lack of resistance, t|T)he (?:huge )?(?:bronze )?gate .* open|^The ancient hinges of the gate creak loudly as they give way|^Summoning the power .*? gate opens|the gate slowly opens wide enough to allow passage|The bronze gate pops open|^It's opened wide enough to slip through now\\. That thick chain won't let it open any farther\\.$|just (came|went) through a massive bronze gate\\.$/)
        fill_hands
      end
    end 
  MyWayto
)