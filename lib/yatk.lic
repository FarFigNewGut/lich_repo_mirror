if variable[1].nil?; echo "NEED A SPELL NUMBER"; exit; end
if variable[2].nil?; variable[2]="offense"; end


fput "target clear"
loop {
 
sleep 0.5
 
while GameObj.targets.count {|npc| npc.status !~ /dead|gone|prone/ && npc.name !~ /animated|ghostly|arm|arms|raven|wyrdling/ } > 0
 
	if !Spell[515].active? and !Spell[599].active? and checkmana >= 30
		waitcastrt?
		waitrt?
		Spell[515].cast
	end
 
	if checkmana < 30
		fput "stance def"
		echo "------==== Out Of Mana ==== ------"
		wait_until { checkmana >= 30 }
		Spell[515].cast
	end
 
	waitrt?
	waitcastrt?
	fput "stance #{variable[2]}"
	fput "inc #{variable[1]}"
	fput "stance defense"
 
end
Script.run('sloot') if GameObj.npcs.count {|npc| npc.status =~ /dead/} > 0
}