=begin
  Auto-daubs all your bingo numbers! Win GS!
  
  Functions:
    - daub numbers as they are called by:
      ;ghoul_2022
    - daub all the numbers already called by:
      ;ghoul_2022 catchup
    - auto yell GHOUL! when a certain number comes up by:
      ;ghoul_2022 <letter> <number>
        ex: ;ghoul_2022 o 37

  original by: Drafix
  
  this one by: Xanlin

  version: 202210132121
=end

module Ghoul2022
  def self.catchup()
    status_tags
    put "look runed cabinet"
    count = 0
    while line = get
      if line =~ /^\| ([GHOULSETIR]) \|~\| (.+)$/
        letter = $1
        line_numbers = $2
        numbers = line_numbers.scan(/<pushBold\/>(\d\d) <popBold\/>/).flatten
        numbers.each{|num| put "daub my card #{letter} #{num}";sleep 0.2}
        count = count + 1
        echo "count: #{count}"
        break if count >= 5
      end
    end
    echo "catchup done"
    status_tags
  end
  
  if Script.current.vars[1].nil? or Script.current.vars[1] =~ /catchup/i
    self.catchup if Script.current.vars[1] =~ /catchup/i
    echo "watching for announcements"
    while line = get
      if line =~ /An ethereal voice calls out, "(.*?)" before the ball drifts back into/
        put "daub my card #{$1}"
      elsif line =~ /The period of time for making the first mark on your game card has started.  If it was already daubed prior to this announcement, it will not be eligible to win this round./
        put "daub my card o free"
        put "daub my card o free"
      elsif line =~ /you daub a space on your card./
        put "look my card"
      end
    end
  elsif Script.current.vars[1] =~ /^[GHOULSETIR]$/i and Script.current.vars[2] =~ /^\d\d?$/
    echo "Waiting for \"#{Script.current.vars[0]}\" before yelling GHOUL!"
    while line = get
      if line =~ /An ethereal voice calls out, "({#{Script.current.vars[0]})" before the ball drifts back into/i
        put "say GHOUL!"
        break
      end
    end
  end
end