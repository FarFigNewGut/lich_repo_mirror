=begin

        Reads and prints out a sorted version of the DR endless leaderboard

		author: someone
		game: Gemstone
		tags: dr, duskruin, leaderboard, epeen, endless
		version: 1.0

=end

if Room.current.id != 23766
	echo "Not in the correct room looks like. Or someone broke the mapdb again."
	exit
end
profs = ["warrior", "rogue", "cleric", "sorcerer", "wizard", "ranger", "bard", "savant", "paladin", "monk", "empath"]
results = Array.new
profs.each { |prof|
	(echo "LOL SAVANT";next) if prof == "savant"
        profcheck = dothistimeout "look #{prof} leaderboard", 2, /^Looking at the #{prof} leaderboard, you see [A-Z][a-z]+ currently holds the top position at round [0-9,]+/
        profcheck =~ /^Looking at the #{prof} leaderboard, you see ([A-Z][a-z]+) currently holds the top position at round ([0-9,]+)/
        results.push({"prof" => prof, "leader" => $1, "round" => $2.delete(",").to_i })
}
results.sort! { |x, y| y["round"] <=> x["round"] }
results.each { |res|
	_respond "Round: #{res["round"].to_s.ljust(5)}  Prof: #{res["prof"].rjust(8)}  #{res["leader"]}"
}
