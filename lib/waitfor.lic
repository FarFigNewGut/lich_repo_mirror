=begin

Convenience script to wait for either 
    percent mind
    seconds to pass
    mana %
before executing provided script


wait_for seconds 5 go2 town -> wait 5 seconds then call ;go2 town
wait_for mind 50 bigshot -> wait until mind is below 50% then call ;bigshot
wait_for mana 75 waggle -> wait until mana is above 75% then call ;waggle

# Name: WaitFor
# Author: Bramard
# Tags: utility, stormfront
# Categories: Utility, Bounties
# Tags: utility
# Version: 1.1
=end

all_args = script.vars
# echo all_args

if script.vars.length > 3 && script.vars[1] == 'mind'
    str = "Waiting until mind is " + all_args[2] + "% to run #{all_args[3]}"
    Settings[:currentWaitFor] = str
    echo str
    wait_until { percentmind() < all_args[2].to_i } 
    echo "Executing..."
    Settings[:currentWaitFor] = nil    
    start_script(all_args[3], all_args[4,all_args.length-1])
elsif script.vars.length > 3 && script.vars[1] == 'seconds'
    str = "Waiting " + all_args[2] + " seconds to run #{all_args[3]}"
    Settings[:currentWaitFor] = str
    echo str
    sleep all_args[2].to_i
    echo "Executing..."
    Settings[:currentWaitFor] = nil 
    start_script(all_args[3], all_args[4,all_args.length-1])
elsif script.vars.length > 3 && script.vars[1] == 'mana'
    str = "Waiting until mana is above " + all_args[2] + "% to run #{all_args[3]}"
    Settings[:currentWaitFor] = str
    echo str
    wait_until { percentmana() >= all_args[2].to_i } 
    echo "Executing..."
    Settings[:currentWaitFor] = nil 
    start_script(all_args[3], all_args[4,all_args.length-1])
elsif script.vars[1] == 'show'
    if Settings[:currentWaitFor] != nil
        echo Settings[:currentWaitFor]
    else
        echo "Not currently waiting for anything..."
    end
else
    echo "I don't understand..."
end
