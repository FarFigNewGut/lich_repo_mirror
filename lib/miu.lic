=begin

Two variables are used:
Vars.miusack = Container holding magical items.
Vars.spellsack = Container holding container holding magical items.
Example: Sarcophagus in Harness
=end

class Artifacts
	CAST_INFO = {
		"Spirit Defense" 			=> { "number" => "103", 	"item" => "spinewood rod",			"activator" => "raise",		"buried" => false,		"worn" => false		},
		"Lesser Shroud" 			=> { "number" => "120",		"item" => "white rod",				"activator" => "raise",		"buried" => false, 		"worn" => false		},
		"Spirit Shield" 			=> { "number" => "202", 	"item" => "black shell",			"activator" => "raise",		"buried" => false, 		"worn" => false		},
		"Bravery" 					=> { "number" => "211", 	"item" => "rounded crystal",		"activator" => "rub",		"buried" => false, 		"worn" => false		},
		"Heroism" 					=> { "number" => "215",		"item" => "heroic clasp",			"activator" => "raise",		"buried" => true, 		"worn" => false		},			#Handled via Script
		"Prayer of Protection" 		=> { "number" => "303", 	"item" => "jet crystal",            "activator" => "rub",		"buried" => false, 		"worn" => false		},
		"Benediction" 				=> { "number" => "307", 	"item" => "white cube",             "activator" => "raise",		"buried" => true, 		"worn" => false		},			#Handled via Script
		"Phoen's Strength" 			=> { "number" => "606", 	"item" => "blue-white flame",       "activator" => "raise",		"buried" => true, 		"worn" => false		},
		"Self Control" 				=> { "number" => "613", 	"item" => "shadowglass hexagram",   "activator" => "raise",		"buried" => true, 		"worn" => false		},
		"Cloak of Shadows" 			=> { "number" => "712", 	"item" => "mote shadow",            "activator" => "raise",		"buried" => true, 		"worn" => false		},
		"Foresight" 				=> { "number" => "1204", 	"item" => "peacock crystal",        "activator" => "rub",		"buried" => false, 		"worn" => false		},
		"Mantle of Faith" 			=> { "number" => "1601", 	"item" => "shark fin",              "activator" => "raise",		"buried" => false, 		"worn" => false		},
		"Arcane Decoy" 				=> { "number" => "1701", 	"item" => "gold pin",               "activator" => "rub",		"buried" => false,		"worn" => true		},			#Handled via Script
		"Spirit Guard" 				=> { "number" => "1712", 	"item" => "small statue",  		   	"activator" => "rub",		"buried" => false,		"worn" => false		}
		}

	def self.cast_info_for(spell_name)
		CAST_INFO.fetch(spell_name)
	end

	spell_list = [ 'Bravery' ]
	scripted_spells = [ 'Heroism','Benediction', 'Arcane Decoy']
	if Char.name == 'Alastir'
		spell_list.each{ |spell|
		spell_name = spell
		if !Effects::Spells.to_h.include?("#{spell}")
			item = cast_info_for(spell)["item"]
			activator = cast_info_for(spell)["activator"]
			number = cast_info_for(spell)["number"]
			buried = cast_info_for(spell)["buried"]

			if buried == true
				multifput "get #{Vars.miusack} from my #{Vars.spellsack}","get #{item} from my #{Vars.miusack}"
				dothistimeout "#{activator} #{item}", 3, /^You (?:rub|tap|raise)/
				waitcastrt?
				multifput "put my #{item} in my #{Vars.miusack}","put my #{Vars.miusack} in my #{Vars.spellsack}"
			else
				multifput "get #{item} from my #{Vars.spellsack}"
				dothistimeout "#{activator} #{item}", 3, /^You (?:rub|tap|raise)/
				waitcastrt?
				multifput "put my #{item} in my #{Vars.spellsack}"
			end
		else
			respond "#{spell} is currently active."
		end
		}

		scripted_spells.each{ |spell|
		spell_name = spell
		if !Effects::Spells.to_h.include?("#{spell}")
			item = cast_info_for(spell)["item"]
			activator = cast_info_for(spell)["activator"]
			number = cast_info_for(spell)["number"]

			if number =~ /#{scripted_spells}/
				scripted_spells.each { |spell|
				scripted_spell = spell unless Effects::Spells.to_h.include?("#{spell}")
				start_script ("#{scripted_spell}")
					wait_while {running? "#{scripted_spell}"}
				}
			end
		else
			respond "#{spell} is currently active."
		end
		}
	end
end
	
#spell_list = [ 'Spirit Defense','Bravery' ];spell_list.each{ |spell|respond !Effects::Spells.to_h.include?("#{spell}")}
#		spell_list = [ 'Spirit Defense','Spirit Shield','Bravery','Heroism','Prayer of Protection','Benediction',"Phoen's Strength",'Self Control','Cloak of Shadows','Foresight','Mantle of Faith','Arcane Decoy','Spirit Guard' ]
