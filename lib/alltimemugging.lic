=begin

author: Demandred
version: 0.4

0.4 - further cleaning and maintenance
0.3 - cleaned some stuff up, prettied the display a bit more
0.2 - added total of each item in its header
0.1 - fixed hash setup

=end

def message(text)
	string = ''
	if $fake_stormfront then string.concat("\034GSL\r\n ") else string.concat("<pushBold\/>")	end
	if (text.index('\n')) then text.split('\n').each { |line| string.concat("#{line}") } else string.concat(text) end
	if $fake_stormfront then string.concat("\034GSM\r\n ") else string.concat("<popBold\/>") end
	_respond string
end

UserVars.mugged = {} if UserVars.mugged.nil?
UserVars.mugged[:silvers] = ["silvers", 0] if UserVars.mugged[:silvers].nil?
UserVars.mugged[:boxes] = [] if UserVars.mugged[:boxes].nil?
UserVars.mugged[:gems] = [] if UserVars.mugged[:gems].nil?
UserVars.mugged[:items] = [] if UserVars.mugged[:items].nil?
UserVars.mugged[:heirlooms] = [] if UserVars.mugged[:heirlooms].nil?
UserVars.mugged[:attempts] = 0 if UserVars.mugged[:attempts].nil?
UserVars.mugged[:success] = 0 if UserVars.mugged[:success].nil?
totalboxes = 0
totalgems = 0
totalitems = 0
totalheirlooms = 0
left_just = 5

UserVars.mugged[:boxes].each do |i|
	totalboxes += i[1]
end
UserVars.mugged[:gems].each do |i|
	totalgems += i[1]
end
UserVars.mugged[:items].each do |i|
	totalitems += i[1]
end
totalheirlooms = UserVars.mugged[:heirlooms].count



if (UserVars.mugged[:silvers][1].to_s.length + 1) > left_just
	left_just = (UserVars.mugged[:silvers][1].to_s.length + 1)
end
if !UserVars.mugged[:boxes].empty?
	UserVars.mugged[:boxes].each do |i|
		if (i[1].to_s.length.to_i + 1) > left_just
			left_just = i[1].to_s.length.to_i + 1
		end
	end
end
if !UserVars.mugged[:gems].empty?
	UserVars.mugged[:gems].each do |i|
		if (i[1].to_s.length.to_i + 1) > left_just
			left_just = i[1].to_s.length.to_i + 1
		end
	end
end
if !UserVars.mugged[:items].empty?
	UserVars.mugged[:items].each do |i|
		if (i[1].to_s.length.to_i + 1) > left_just
			left_just = i[1].to_s.length.to_i + 1
		end
	end
end
if !UserVars.mugged[:heirlooms].empty?
	UserVars.mugged[:heirlooms].each do |i|
		if (i[1].to_s.length.to_i + 1) > left_just
			left_just = i[1].to_s.length.to_i + 1
		end
	end
end
message(" All Time Mug Report")
message(" Attempts: #{UserVars.mugged[:attempts]} Successes: #{UserVars.mugged[:success]}")
if !UserVars.mugged[:boxes].empty?
	message(" Boxes - Total Found: #{totalboxes}")
	UserVars.mugged[:boxes].each do |thing|
		respond("#{thing[1].to_s.rjust(left_just)}  -  #{thing[0].to_s}")
	end
end
if !UserVars.mugged[:gems].empty?
	message(" Gems - Total Found: #{totalgems}")
	UserVars.mugged[:gems].each do |thing|
		respond("#{thing[1].to_s.rjust(left_just)}  -  #{thing[0].to_s}")
	end
end
if !UserVars.mugged[:items].empty?
	message(" Items - Total Found: #{totalitems}")
	UserVars.mugged[:items].each do |thing|
		respond("#{thing[1].to_s.rjust(left_just)}  -  #{thing[0].to_s}")
	end
end
if !UserVars.mugged[:heirlooms].empty?
	message(" Heirlooms - Total Found: #{totalheirlooms}")
	UserVars.mugged[:heirlooms].each do |thing|
		respond("#{thing[1].to_s.rjust(left_just)}  -  #{thing[0].to_s}")
	end
end
message(" Silvers")
respond("#{UserVars.mugged[:silvers][1].to_s.rjust(left_just)}  -  #{UserVars.mugged[:silvers][0].to_s}")
