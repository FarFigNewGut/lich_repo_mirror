#hunt_end.lic

#Vars.lootsack
#Vars.gemsack -- Where to pull gems.
#Vars.storage -- Where to place gems. (bookcase)
#Vars.statue_storage -- Where to place statues. (shelves)


def heal
	Script.run('herbmaster', [ 'in desk' ])
	start_room = Room.current
	Script.run('herbheal')
	Script.run('go2', start_room.id.to_s)
end

def process_loot
	Script.run('foreach', [ "gem in my #{Vars.gemsack};get item;put item in #{Vars.storage}" ])
	Script.run('foreach', [ "name=small statue in my #{Vars.lootsack};get item;put item on #{Vars.statue_storage}" ])
	Script.run('foreach', [ "type=collectible in my #{Vars.lootsack};get item;put item in desk" ])
	Script.run('foreach', [ "type=herb in my #{Vars.lootsack};get item;put item in desk" ])	
end

##### MAIN LOOP

if Char.name == 'Alastir'
	if GameObj.right_hand.noun or GameObj.left_hand.noun == 'reins'
		fput 'put my reins in my harness'
	end
	Script.run('store')
else
	fput 'store all'
end

if Room.current.id == 26833 		#[Journey's End, Study]
	heal
	Script.run('poolparty')
	process_loot
	Script.run('silvers')
elsif Room.current.id == 28916 		#[Kraken's Fall, North Arm Lane]
	Script.run('herbmaster', [ 'on table' ])
elsif Room.current.id == 29623		#[Estate, Greatroom - 29623]
	Script.run('herbmaster', ['in my kit'])
	
	if percentencumbrance > 10
		Script.run('poolparty')	
		Script.run('loot-be-gone2')
	end
else
	Script.run('herbmaster')
end

Script.run('waggle')
if Char.prof == 'Cleric' or 'Wizard'
	Script.run('waggle', [ "#{Vars.spellall}" ])
end

if Char.name == 'Alastir'
	Script.run('logic')
end



