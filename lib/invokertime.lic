squelch_time = proc{
        started = false
        hook_proc = proc { |s|
                if started
                        if s =~ /<prompt/
                                DownstreamHook.remove('squelch-time')
                                nil
                        elsif s =~ /<output/
                                s
                        else
                                nil
                        end
                elsif s =~ /^Today is/
                        started = true
                        nil
                else
                        s
                end
        }
        DownstreamHook.add('squelch-time', hook_proc)
}


squelch_time.call
silence_me
fput "time"
silence_me
line = matchtimeout 3, "by the elven"
if line =~ /It is (\d+):(\d+) by the elven/
  hour = $1
  min = $2

  ## 12am
  if hour == "00"
    hL = 1
    mL = 60 - min.to_i

  ## 1am
  elsif hour == "01"
    hL = 0
    mL = 60 - min.to_i

  ## 2am
  elsif hour == "02"
    hL = 1
    mL = 60 - min.to_i

  ## 3am
  elsif hour == "03"
    hL = 0
    mL = 60 - min.to_i

  ## 4am
  elsif hour == "04"
    hL = 1
    mL = 60 - min.to_i

  ## 5am
  elsif hour == "05"
    hL = 0
    mL = 60 - min.to_i

  ## 6am
  elsif hour == "06"
    hL = 3
    mL = 60 - min.to_i

  ## 7am
  elsif hour == "07"
    hL = 2
    mL = 60 - min.to_i

  ## 8am
  elsif hour == "08"
    hL = 1
    mL = 60 - min.to_i

  ## 9am
  elsif hour == "09"
    hL = 0
    mL = 60 - min.to_i

  ## 10am
  elsif hour == "10"
    hL = 3
    mL = 60 - min.to_i

  ## 11am
  elsif hour == "11"
    hL = 2
    mL = 60 - min.to_i

  ## 12 pm
  elsif hour == "12"
    hL = 1
    mL = 60 - min.to_i

  ## 1 pm
  elsif hour == "13"
    hL = 0
    mL = 60 - min.to_i

  ## 2pm
  elsif hour == "14"
    hL = 3
    mL = 60 - min.to_i

  ## 3pm
  elsif hour == "15"
    hL = 2
    mL = 60 - min.to_i

  ## 4pm
  elsif hour == "16"
    hL = 1
    mL = 60 - min.to_i

  ## 5pm
  elsif hour == "17"
    hL = 0
    mL = 60 - min.to_i

  ## 6pm
  elsif hour == "18"
    hL = 1
    mL = 60 - min.to_i

  ## 7pm
  elsif hour == "19"
    hL = 0
    mL = 60 - min.to_i

  ## 8pm
  elsif hour == "20"
    hL = 1
    mL = 60 - min.to_i

  ## 9pm
  elsif hour == "21"
    hL = 0
    mL = 60 - min.to_i

  ## 10pm
  elsif hour == "22"
    hL = 1
    mL = 60 - min.to_i

  ## 11pm
  elsif hour == "23"
    hL = 0
    mL = 60 - min.to_i
  end
  
  if hL == 1 or hL == 2 or hL == 3
    respond "[[[[  #{hL} hours and #{mL} minutes till invoker returns!  ]]]]"
  else
    respond "[[[[  #{mL} minutes till invoker returns!  ]]]]"
  end
end


##00 02 04 06 10 14 18 20 22
