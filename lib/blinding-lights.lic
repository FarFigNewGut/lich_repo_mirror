=begin

	Tired of seeing the same game lines over and over and OVER AND OVER AND OVER AND OOVVVEEERRRR again?! Well this is the script for you! Simply start the script and specify how many times you want to see the same game line, and once you've seen the same game line that many times then you'll NEVER see those game lines again! Well until you stop the script, then you'll start to see all game lines again.
	
	Example of how to start the script:
	
	;blinding-lights 3
	;blind 3
	
	Would make it so once you've seen the same game line 3 times then you'll stop seeing that same game line until you stop the script. Stopping the script resets all line counts to 0.
	
	After all, how many times do you need to see the same person selling the same gem to the gemshop? Or the same person casting the same spell? Not too often, that's for sure!
	
	So download ;blinding-lights today and stop being blinded by the lights!
	
	Changelog:
	Version 1: Initial release!
	Version 2: Added SEND to the list of game lines to always show.
	
	########################################################
	Ways to contact me:
	In game: Dreaven
	Player's Corner: Tgo01
	Discord: Dreaven#6436
	Email: LordDreaven@gmail.com
	If you like my scripts feel free to send me a tip via Paypal at: LordDreaven@gmail.com
	########################################################

	Author: Dreaven
	Version 2
=end

@blinding_lights_all_game_lines_seen = Hash.new

blinding_lights_squelch = proc {
	action = proc { |server_string|
		stripped_line = strip_xml(server_string)
		if stripped_line =~ /Also here\:|joins your group|offers you|which you quickly pocket|says\,|exclaims\,|asks\,|whispers\,|Obvious exits\:|Obvious paths\:|SEND/
			server_string
		else
			@blinding_lights_all_game_lines_seen[stripped_line] += 1
			if @blinding_lights_all_game_lines_seen[stripped_line] > @blinding_lights_game_line_number
				nil
			else
				server_string
			end
		end
	}
	DownstreamHook.add("#{script.name}_blinding_lights_squelch", action)
}

before_dying{
	DownstreamHook.remove("#{script.name}_blinding_lights_squelch")
}

if script.vars[1].nil? || script.vars[1] !~ /\d+/
	respond
	respond "You must specify how many times you want to see the same game line before it is ignored."
	respond "For example start script as: ;blinding-lights 3"
	respond "This would make it so after you see the same game line 3 times you will no longer see that same game line, until you stop the script. Each time you start the script the counter is reset to zero and you can change the number of times you want to see the same game line."
	respond "Some important game lines will always be seen, game lines such as: Also here, Obvious paths, and people SAYing, ASKing, WHISPERing, giving you something, etc."
	respond
else
	@blinding_lights_game_line_number = script.vars[1].to_i
	blinding_lights_squelch.call
	respond
	respond "You will now no longer see game lines after you have seen the same game line more than #{@blinding_lights_game_line_number} times. Stop the script to see all game lines again."
	respond "Some important game lines will always be seen, game lines such as: Also here, Obvious paths, and people SAYing, ASKing, WHISPERing, giving you something, etc."
	sleep
end