=begin
This will sail your ship in a determined pattern, 1. Line Pattern (North and then South continuously) or 2. Circle Pattern (North, West, South then East continuously) 
the script will notify you if any pirates appear and ask you your desired action.
This script is not intended to be used AFK in anyway.
To use just run the script from anywhere on your ship, underway or not. 
Enjoy

~Peggyanne
PS: feel free to send me any bugs via discord Bait#4376 and I'll try my best to fix them.
3/06/2021 Initial Release.

=end
det_drift = proc{
	echo "Detirmining Corrective Course"
while line = get
if line =~ /The (.*) wheel slowly turns off course./
	@corrected = "None"
	break
elsif line =~ /The (.*) (cuts through the ocean, heading|drifts slowly) (\w+)/
  if $3 == @course
	break
  if $3 == "north"
    @corrected = "south"
	echo "Corrective Course Detirmined"
	break
  elsif $3 == "south"
    @corrected = "north"
	echo "Corrective Course Detirmined"
	break
  elsif $3 == "west"
    @corrected = "east"
	echo "Corrective Course Detirmined"
	break
  elsif $3 == "east"
    @corrected = "west"
	echo "Corrective Course Detirmined"
	break
  elsif $3 == "northeast"
    @corrected = "southwest"
	echo "Corrective Course Detirmined"
	break
  elsif $3 == "northwest"
    @corrected = "southeast"
	echo "Corrective Course Detirmined"
	break
  elsif $3 == "southwest"
    @corrected = "northeast"
	echo "Corrective Course Detirmined"
	break
  elsif $3 == "southeast"
    @corrected = "northwest"
	echo "Corrective Course Detirmined"
	break
	end
	end
	end
	end
}	

fix_wheel = proc{
if @corrected == "None"
fput "turn wheel #{@course}"
echo "Taking Corrective Course"
next
else fput "turn wheel #{@corrected}"
echo "Taking Corrective Course"
	while line = get
		if line =~ /The (.*) (cuts through the ocean, heading|drifts slowly) (.*)/
					waitrt?
					echo "Resuming Original Course"
					waitrt?
					break
		elsif line =~ /The sound of ropes coming free of the rigging (.*)/
					echo "The Sails Have Been Furled"
					fix_sails.call
					break
		elsif line =~ /A large swell crashes into the side of the (.*)/
					echo "Rogue Wave! Secure that Anchor!"
					fix_anchor.call
					break
		elsif line =~ /The (.*) suddenly drifts from its course as the (.*) wheel spins out of control!/
					respond "The Ship's Gone Off Course Captain!"
					det_drift.call
					fix_wheel.call
					end
end
end
}
one_mast = proc{
fput "lower sail"
waitrt?
fput "lower sail"
echo "Main Mast Unfurled, She's Ready to Sail Captain!"
waitrt?
move "west"
echo "Raising Anchor"
fput "push capstan"
waitrt?
fput "push capstan"
waitrt?
fput "push capstan"
waitrt?
fput "push capstan"
waitrt?
while line = get
		if line =~ /The (.*) (cuts through the ocean, heading|drifts slowly) (.*)/
					waitrt?
					echo "Resuming Original Course"
					break
		elsif line =~ /The sound of ropes coming free of the rigging (.*)/
					echo "The Sails Have Been Furled"
					fix_sails.call
					break
		elsif line =~ /A large swell crashes into the side of the (.*)/
					echo "Rogue Wave! Secure that Anchor!"
					fix_anchor.call
					break
		elsif line =~ /The (.*) suddenly drifts from its course as the (.*) wheel spins out of control!/
					respond "The Ship's Gone Off Course Captain!"
					det_drift.call
					fix_wheel.call
					end
end	
}

two_mast = proc{
fput "lower sail"
waitrt?
fput "lower sail"
echo "Main Mast Unfurled"
waitrt?
move "east"
fput "lower sail"
waitrt?
fput "lower sail"
echo "Fore Mast Unfurled, She's Ready to Sail Captain!"
waitrt?
move "west"
pause 1
move "west"
echo "Raising Anchor"
fput "push capstan"
waitrt?
fput "push capstan"
waitrt?
fput "push capstan"
waitrt?
fput "push capstan"
waitrt?
while line = get
		if line =~ /The (.*) (cuts through the ocean, heading|drifts slowly) (.*)/
					waitrt?
					echo "Resuming Original Course"
					break
		elsif line =~ /The sound of ropes coming free of the rigging (.*)/
					echo "The Sails Have Been Furled"
					fix_sails.call
					break
		elsif line =~ /A large swell crashes into the side of the (.*)/
					echo "Rogue Wave! Secure that Anchor!"
					fix_anchor.call
					break
		elsif line =~ /The (.*) suddenly drifts from its course as the (.*) wheel spins out of control!/
					respond "The Ship's Gone Off Course Captain!"
					det_drift.call
					fix_wheel.call
					end
end
}

three_mast = proc{
fput "lower sail"
waitrt?
fput "lower sail"
echo "Mizzen Mast Unfurled"
waitrt?
move "east"
fput "lower sail"
waitrt?
fput "lower sail"
echo "Main Mast Unfurled"
waitrt?
move "east"
fput "lower sail"
waitrt?
fput "lower sail"
echo "Fore Mast Unfurled, She's Ready to Sail Captain!"
move "west"
pause 1
move "west"
pause 1
move "west"
echo "Raising Anchor"
fput "push capstan"
waitrt?
fput "push capstan"
waitrt?
fput "push capstan"
waitrt?
fput "push capstan"
waitrt?
while line = get
		if line =~ /The (.*) (cuts through the ocean, heading|drifts slowly) (.*)/
					waitrt?
					echo "Resuming Original Course"
					break
		elsif line =~ /The sound of ropes coming free of the rigging (.*)/
					echo "The Sails Have Been Furled"
					fix_sails.call
					break
		elsif line =~ /A large swell crashes into the side of the (.*)/
					echo "Rogue Wave! Secure that Anchor!"
					fix_anchor.call
					break
		elsif line =~ /The (.*) suddenly drifts from its course as the (.*) wheel spins out of control!/
					respond "The Ship's Gone Off Course Captain!"
					det_drift.call
					fix_wheel.call
					end
end
}

fix_sails = proc{
echo "Dropping Anchor"
fput "kick capstan"
waitrt?
respond "Let Go the Halyard, Sheets, and Braces!"
move "east"
	if @shiptype == "sloop" 
	then
	one_mast.call
	elsif @shiptype == "brigantine"
	then
	two_mast.call
	elsif @shiptype == "carrack"
	then
	two_mast.call
	elsif @shiptype == "galleon"
	then
	three_mast.call
	elsif @shiptype == "frigate"
	then
	three_mast.call
	elsif @shiptype == "manowar"
	then
	three_mast.call
	end
}

fix_anchor = proc{
echo "Securing the Anchor"
fput "push capstan"
waitrt?
fput "push capstan"
waitrt?
fput "push capstan"
waitrt?
fput "push capstan"
waitrt?
while line = get
		if line =~ /The (.*) (cuts through the ocean, heading|drifts slowly) (.*)/
					waitrt?
					echo "Resuming Original Course"
					break
		elsif line =~ /The sound of ropes coming free of the rigging (.*)/
					echo "The Sails Have Been Furled"
					fix_sails.call
					break
		elsif line =~ /A large swell crashes into the side of the (.*)/
					echo "Rogue Wave! Secure that Anchor!"
					fix_anchor.call
					break
		elsif line =~ /The (.*) suddenly drifts from its course as the (.*) wheel spins out of control!/
					respond "The Ship's Gone Off Course Captain!"
					det_drift.call
					fix_wheel.call
					end
end
}

steer_course = proc{
	echo "Changing Heading"
	fput "turn wheel #{@course}"
	while line = get
		if line =~ /The (.*) (cuts through the ocean, heading|drifts slowly) (.*)/
			waitrt?
			break
		elsif line =~ /A large swell crashes into the side of the (.*)/
			echo "Rogue Wave! Secure that Anchor!"
			fix_anchor.call
			break
		elsif line =~ /The sound of ropes coming free of the rigging(.*)/
			echo "The Sails Have Furled"
			fix_sails.call
			break
		elsif line =~ /The (.*) suddenly drifts from its course as the (.*) wheel spins out of control!/
			echo "The Ship Has Gone Off Course"
			det_drift.call
			fix_wheel.call
			break
		elsif line =~ /(.*)carves through the ocean toward your (.*)/
			fput "yell Enemy ship detected! Take Cover!"
			respond  "


=======================================
DANGER: An Enemy Vessel Approaches\!
    1\. Engage
    2\. Run
=======================================
  What Are Your Orders Captain\?
		  ;send <#> "
		elsif line =~ /A sudden splash of glowing green waters rises skyward surrounding your (.*)  As the water falls (.*) materializes next to your ship!/
			fput "yell Enemy ship detected! Take Cover!"
			respond  "
			

=======================================
DANGER: An Enemy Vessel Approaches\!
    1\. Engage
    2\. Run
=======================================
  What Are Your Orders Captain\?
		  ;send <#> "
		elsif line =~ /A distant thudding of the drums of war act as a harbinger for a (.*)/
			fput "yell Enemy ship detected! Take Cover!"
			respond  "


=======================================
DANGER: An Enemy Vessel Approaches\!
    1\. Engage
    2\. Run
=======================================
  What Are Your Orders Captain\?
		  ;send <#> "
		elsif line == "1"
			fput "yell We Are Engaging The Enemy Vessel, All Hands To Your Battlestations!"
			puts "
			==============================================================================
			Pausing Script To Engage The Enemy, Unpause After You Raze Thier Ship
			==============================================================================
			"
			fput "turn wheel ship"
			do_client ";pause piratehunter"
			fput "turn wheel #{@course}"
		elsif line == "2"
			respond "Helmsman! Take Us Out Of Here!"
			fput "yell Evasive Manuevers, All Hands Take Cover!"
		elsif line =~ /The (.*) abruptly changes course away from your (.*)/
			respond "
* I Think We Lost Them Captain, Resuming Course *
"
		elsif line =~ /Curses and insults rise above the crashing waters below as the (.*) continues to give chase./
			respond "
			* We Are Being Persued Captain! It Is Not Too Late To Engage The Enemy! (;send 1 to Engage) *
			"
		elsif line =~ /The (.*) matches your (.*) pace as it looms within range./
			respond "
			* We Are Being Persued Captain! It Is Not Too Late To Engage The Enemy! (;send 1 to Engage) *
			"
		elsif line =~ /Cresting waves rapidly, the (.*) continues to chase your (.*)/
			respond "
			* We Are Being Persued Captain! It Is Not Too Late To Engage The Enemy! (;send 1 to Engage) *
			"
		elsif line =~ /The sails of the (.*) rapidly shift from port to starboard as the (.*) does not relent in its attempt to overcome your (.*)!/
			respond "
			* We Are Being Persued Captain! It Is Not Too Late To Engage The Enemy! (;send 1 to Engage) *
			"
		elsif line =~ /Barks of rage can be heard from the (.*) as it continues to give chase./
			respond "
			* We Are Being Persued Captain! It Is Not Too Late To Engage The Enemy! (;send 1 to Engage) *
			"
		elsif line =~ /Hollow sounding moans erupt from the (.*) as it continues to give chase./
			respond "
			* We Are Being Persued Captain! It Is Not Too Late To Engage The Enemy! (;send 1 to Engage) *
			"
			elsif line =~ /Sails billowing, the (.*) continues to chase your (.*)/
			respond "
			* We Are Being Persued Captain! It Is Not Too Late To Engage The Enemy! (;send 1 to Engage) *
			"
	end
end
}

line_pattern = proc{
loop {
@course = "North"
steer_course.call
@course = "South"
steer_course.call
}
}

circle_pattern = proc{
loop {
@course = "North"
steer_course.call
@course = "West"
steer_course.call
@course = "South"
steer_course.call
@course = "East"
steer_course.call
}
}

hunting_pattern = proc{
respond  "


===========================================================
Which Pattern Do You Wish To Sail In\?
		
   1\. Line Pattern
   2\. Circle Pattern
============================================================
 Select only when your ship has the space to manuever
        ;send <#> "
respond
clear
line = nil
line = get until line.strip =~ /^[0-9]+$/
pattern = line
if pattern == "1"
line_pattern.call
elsif pattern == "2"
circle_pattern.call
end
}

one_underway = proc{
fput "pull gangplank"
fput "lower sail"
pause 4
waitrt?
fput "lower sail"
echo "Main Mast Unfurled, She's Ready to Sail Captain!"
pause 4
waitrt?
move "west"
echo "Raising Anchor"
fput "push capstan"
pause 4
waitrt?
fput "push capstan"
pause 4
waitrt?
fput "push capstan"
pause 4
waitrt?
fput "push capstan"
pause 4
waitrt?
respond "Anchor's Aweigh!"
fput "depart"
fput "depart"
fput "yell Underway!"
hunting_pattern.call
}

two_underway = proc{
fput "pull gangplank"
fput "lower sail"
pause 4
waitrt?
fput "lower sail"
echo "Main Mast Unfurled"
pause 4
waitrt?
move "east"
fput "lower sail"
pause 4
waitrt?
fput "lower sail"
echo "Fore Mast Unfurled, She's Ready to Sail Captain!"
pause 4
waitrt?
move "west"
pause 1
move "west"
echo "Raising Anchor"
fput "push capstan"
pause 4
waitrt?
fput "push capstan"
pause 4
waitrt?
fput "push capstan"
pause 4
waitrt?
fput "push capstan"
pause 4
waitrt?
respond "Anchor's Aweigh!"
fput "depart"
fput "depart"
fput "yell Underway!"
hunting_pattern.call
}

three_underway = proc{
fput "pull gangplank"
fput "lower sail"
pause 4
waitrt?
fput "lower sail"
echo "Mizzen Mast Unfurled"
pause 4
waitrt?
move "east"
fput "lower sail"
pause 4
waitrt?
fput "lower sail"
echo "Main Mast Unfurled"
pause 4
waitrt?
move "east"
fput "lower sail"
pause 4
waitrt?
fput "lower sail"
echo "Fore Mast Unfurled, She's Ready to Sail Captain!"
pause 4
waitrt?
move "west"
pause 1
move "west"
pause 1
move "west"
echo "Raising Anchor"
fput "push capstan"
pause 4
waitrt?
fput "push capstan"
pause 4
waitrt?
fput "push capstan"
pause 4
waitrt?
fput "push capstan"
pause 4
waitrt?
respond "Anchor's Aweigh!"
fput "depart"
fput "depart"
fput "yell Underway!"
hunting_pattern.call
}

mast_count = proc{
	if @shiptype == "sloop" 
	then
	one_underway.call
	elsif @shiptype == "brigantine"
	then
	two_underway.call
	elsif @shiptype == "carrack"
	then
	two_underway.call
	elsif @shiptype == "galleon"
	then
	three_underway.call
	elsif @shiptype == "frigate"
	then
	three_underway.call	
	elsif @shiptype == "manowar"
	then
	three_underway.call
	end
}

get_underway = proc{
	if @underway == TRUE
	then
	hunting_pattern.call
	elsif @underway == FALSE
	then
	mast_count.call
	end
}

is_underway = proc{
puts  "


=======================================
Is your ship already underway\?
    1\. Yes
    2\. No
=======================================
		  ;send <#> "
respond
clear
line = nil
line = get until line.strip =~ /^[0-9]+$/
underway = line
if underway == "1"
	@underway = TRUE
	move "west"
	puts "Helmsman, Find Us Some Pirates!"
	get_underway.call
elsif underway == "2"
	@underway = FALSE
	puts "Make Ready For Getting Underway!"
	get_underway.call
end
}

	mcrow_main = proc{
	move "down"
	pause
	move "west"
	pause
	move "west"
	pause
	is_underway.call
	
}

	crow_main = proc{
	move "down"
	pause
	is_underway.call
}

which_crow = proc{
fput "peer down"
while line = get
	if line =~ /(.*)Man O\' War, Forward Deck(.)/
	mcrow_main.call
	else 
	crow_main.call
end
end
}
	
	main_main = proc{
	is_underway.call
}
	cargo_main = proc{
	move "up"
	pause
	is_underway.call
}
	
	crow_main = proc{
	move "down"
	pause
	is_underway.call
}
	
	helm_main = proc{
	move "east"
	pause
	is_underway.call
}
	
	cq_main = proc{
	move "out"
	pause
	move "east"
	pause
	is_underway.call
}
	
	mforward_main = proc{
	move "west"
	pause 
	move "west"
	pause
	is_underway.call
}
	
	mcrow_main = proc{
	move "down"
	pause
	move "west"
	pause
	move "west"
	pause
	is_underway.call
}
	
	forward_main = proc{
	move "west"
	pause
	is_underway.call
}

	bow_main = proc{
	move "west"
	pause
	move "west"
	pause
	is_underway.call
}
	
	mbow_main = proc{
	move "west"
	pause
	move "west"
	pause
	move "west"
	pause
	is_underway.call
}
	
	mess_main = proc{
	move "west"
	pause
	move "up"
	pause
	is_underway.call
}
	
	crew_main = proc{
	move "east"
	pause
	move "up"
	pause
	is_underway.call
}
	
	mid_main = proc{
	move "west"
	pause
	is_underway.call
}

start_location = proc{
fput "look"
while line = get
		if line =~ /(.*), Main Deck(.*)/
		main_main.call
		elsif line =~ /(.*), Cargo Hold(.)/
		cargo_main.call
		elsif line =~ /(.*), Crow\'s Nest(.)/
		which_crow.call
		elsif line =~ /(.*), Helm(.)/
		helm_main.call
		elsif line =~ /(.*), Captain\'s Quarters(.)/
		cq_main.call
		elsif line =~ /(.*)Man O\' War, Forward Deck(.)/
		mforward_main.call
		elsif line =~ /(.*), Forward Deck(.)/
		forward_main.call
		elsif line =~ /(.*)Man O\' War, Bow(.)/
		mbow_main.call
		elsif line =~ /(.*), Bow(.)/
		bow_main.call
		elsif line =~ /(.*), Mess Hall(.)/
		mess_main.call
		elsif line =~ /(.*), Crew Quarters(.)/
		crew_main.call
		elsif line =~ /(.*), Mid Deck(.)/
		mid_main.call
end
end
}

ship_type = proc{
fput "look"
while line = get
		if line =~ /(.*)(Sloop|Brigantine|Carrack|Galleon|Frigate|Man O\' War)/
			if $2 == "Sloop" 
			then
			@shiptype = "sloop"
			start_location.call
			elsif $2 == "Brigantine"
			then
			@shiptype = "brigantine"
			start_location.call
			elsif $2 == "Carrack"
			then
			@shiptype = "carrack"
			start_location.call
			elsif $2 == "Galleon"
			then
			@shiptype = "galleon"
			start_location.call
			elsif $2 == "Frigate"
			then
			@shiptype = "frigate"
			start_location.call
			elsif $2 == "Man O\' War"
			then
			@shiptype = "manowar"
			start_location.call
			end
end
end
}

if variable[1].downcase =~ /help/
	echo "
	
	This will sail your ship in a determined pattern, 1. Line Pattern (North and then South continuously) or 2. Circle Pattern (North, West, South then East continuously) 
the script will notify you if any pirates appear and ask you your desired action.
This script is not intended to be used AFK in anyway.
To use just run the script from anywhere on your ship, underway or not. 
Enjoy

~Peggyanne
PS: feel free to send me any bugs via discord Bait#4376 and I'll try my best to fix them.
3/06/2021 Initial Release."
exit
end

respond "      ====================================================================================================================================
            *****User beware, this script is not meant for AFK use. The sea is a fickle beast and there can be unforseen events***** 
								                                                 Happy Hunting Captain!
		      ==================================================================================================================================== 			"
ship_type.call