#spell_squelch
=begin

Author: Alastir

=end


Spells_Squelch = Regexp.union(
    /<a exist="-\d+" noun="\w+">\w+<\/a> gestures\./,
    /<a exist="-\d+" noun="\w+">\w+<\/a> gestures at <a exist="-\d+" noun="\w+">\w+<\/a>\./,
	/<a exist="-\d+" noun="\w+">\w+<\/a> traces a sign while petitioning the spirits for cognition\.\.\./,
    /<a exist="-\d+" noun="\w+">\w+<\/a> gestures crisply and utters a practiced phrase as raw elemental energies issue forth from <a exist="-\d+" noun="\w+">\w+<\/a> dimly glowing eyes\./,
    /<a exist="-\d+" noun="\w+">\w+<\/a> whispers the words to <a exist="-\d+" noun="\w+">\w+<\/a> spell, tracing <a exist="-\d+" noun="\w+">\w+<\/a> fingers across the sky\.  A vibrant stream of rainbow colors burst forth, streaming alongside <a exist="-\d+" noun="\w+">\w+<\/a> motions before dispersing into an imperceptible mist\./,
    /<a exist="-\d+" noun="\w+">\w+<\/a> renews <a exist="-\d+" noun="\w+">\w+<\/a> songs\./,
    /With an indolent gesture, <a exist="-\d+" noun="\w+">\w+<\/a> languidly traces a rune in the air\./,
    /<a exist="-\d+" noun="\w+">\w+<\/a> skillfully begins to weave another verse into <a exist="-\d+" noun="\w+">\w+<\/a> harmony\./,
    /<a exist="-\d+" noun="\w+">\w+<\/a> recites a series of mystical phrases while raising <a exist="-\d+" noun="\w+">\w+<\/a> hands\.\.\./,
    /<a exist="-\d+" noun="\w+">\w+<\/a> traces a simple symbol as <a exist="-\d+" noun="\w+">\w+<\/a> reverently calls upon the power of <a exist="-\d+" noun="\w+">\w+<\/a> patron\.\.\./,
    /A haze of black mist gathers around <a exist="-\d+" noun="\w+">\w+<\/a> as <a exist="-\d+" noun="\w+">\w+<\/a> prepares a spell\.\.\./,
    /<a exist="-\d+" noun="\w+">\w+<\/a> speaks a quiet phrase in flowing elven\.\.\./,
    /Tiny colorful twinkling motes gather in the palm of <a exist="-\d+" noun="\w+">\w+'s<\/a> hand as <a exist="-\d+" noun="\w+">\w+<\/a> prepares a spell\.\.\./,
    /<a exist="-\d+" noun="\w+">\w+'s<\/a> face is bathed in a serene countenance as <a exist="-\d+" noun="\w+">\w+<\/a> recites\.\.\./,
    /<a exist="-\d+" noun="\w+">\w+<\/a> makes a complex gesture at <a exist="-\d+" noun="\w+">\w+<\/a>\./,
    /<a exist="-\d+" noun="\w+">\w+<\/a> summons a torrent of \w+ and \w+ mana and releases upon <a exist="-\d+" noun="\w+">\w+<\/a> a flurry of abjurations\./,
    /<a exist="-\d+" noun="\w+">\w+<\/a> summons a torrent of elemental mana and releases upon <a exist="-\d+" noun="\w+">\w+<\/a> a flurry of abjurations\./,
    /Dark red droplets coalesce upon <a exist="-\d+" noun="\w+">\w+'s<\/a> skin and upon others in <a exist="-\d+" noun="\w+">\w+<\/a> group\.  The sanguine liquid is visible for only an instant before it sinks into their flesh\./,
    /<a exist="-\d+" noun="\w+">\w+<\/a> and <a exist="-\d+" noun="\w+">\w+<\/a> group appear more confident\./,
    /A brilliant aura surrounds <a exist="-\d+" noun="\w+">\w+'s<\/a> group\./,
    /<a exist="-\d+" noun="\w+">\w+<\/a> looks less calm and refreshed than a moment ago\./,
    /<a exist="-\d+" noun="\w+">\w+'s<\/a> movements no longer appear to be influenced by a divine power as the spiritual force fades from around \w+ arms\./,
	/<a exist="-\d+" noun="\w+">\w+<\/a> suddenly appears less powerful./,
	/The mote of white light next to <a exist="-\d+" noun="\w+">\w+<\/a> disappears./,
    /The brilliant green veins within <a exist="-\d+" noun="\w+">\w+'s<\/a> eyes fade as <a exist="-\d+" noun="\w+">\w+<\/a> posture becomes noticeably more relaxed\./,
    /<a exist="-\d+" noun="\w+">\w+<\/a> looks considerably more imposing\./,
    /<a exist="-\d+" noun="\w+">\w+<\/a> suddenly disappears\./,
    /The brilliant aura fades away from <a exist="-\d+" noun="\w+">\w+<\/a>\./,
    /<a exist="-\d+" noun="\w+">\w+<\/a> seems a bit weaker than before\./,
    /The mirror images surrounding <a exist="-\d+" noun="\w+">\w+<\/a> undulate and grow stronger\./,
    /<a exist="-\d+" noun="\w+">\w+<\/a> and <a exist="-\d+" noun="\w+">\w+<\/a> group seem to slow down and become a bit less nimble\./,
    /<a exist="-\d+" noun="\w+">\w+<\/a> appears less confident\./,
    /As <a exist="-\d+" noun="\w+">\w+<\/a> sings, a squall of wind briefly swirls about <a exist="-\d+" noun="\w+">\w+<\/a>\./,
    /Dark red droplets seep out of <a exist="-\d+" noun="\w+">\w+'s<\/a> skin and evaporate\./,
    /<a exist="-\d+" noun="\w+">\w+<\/a> seems less resolute\./,
    /<a exist="-\d+" noun="\w+">\w+<\/a> seems slightly different\./,
    /<a exist="-\d+" noun="\w+">\w+<\/a> seems hesitant, looking unsure of <a exist="-\d+" noun="\w+">\w+<\/a>\./,
    /<a exist="-\d+" noun="\w+">\w+<\/a> seems to slow down and become a bit less nimble\./,
    /<a exist="-\d+" noun="\w+">\w+'s<\/a> <a exist="\d+" noun="\w+">sonic [\w\-]+<\/a> dissipates\./,
    /With great skill, <a exist="-\d+" noun="\w+">\w+<\/a> removes one of the chords from <a exist="-\w+" noun="\w+">\w+<\/a> harmony while maintaining the symmetry of those that remain\./,
    /A misty halo surrounds <a exist="-\d+" noun="\w+">\w+<\/a>\./,
    /A dim aura surrounds <a exist="-\d+" noun="\w+">\w+<\/a>\./,
    /<a exist="-\d+" noun="\w+">\w+<\/a> looks much more calm and refreshed\./,
    /The mana around <a exist="-\d+" noun="\w+">\w+<\/a> continues to gracefully swirl and move\./,
    /The shimmering aura fades from around <a exist="-\d+" noun="\w+">\w+<\/a>\./,
    /<a exist="-\d+" noun="\w+">\w+<\/a> stands taller, as if bolstered with a sense of confidence\./,
    /Eyes widening momentarily, <a exist="-\d+" noun="\w+">\w+<\/a> gazes into the distance before adopting a thoughtful expression\./,
    /<a exist="-\d+" noun="\w+">\w+<\/a> body is surrounded by a dim dancing aura\./,
    /A cankerous ripple of vesicles temporarily disfigures <a exist="-\d+" noun="\w+">\w+'s<\/a> face and travels down <a exist="-\d+" noun="\w">\w+<\/a> body, leaving a sickly green miasma as it disappears\./,
    /A series of hazel lines spirals outward from the center of <a exist="-\d+" noun="\w+">\w+'s<\/a> forehead, but quickly fade away\./,
	/<a exist="-\d+" noun="\w+">\w+<\/a> makes a complex gesture at <a exist="-\d+" noun="\w+">\w+<\/a>\./,													#Multi-Cast
	/<a exist="-\d+" noun="\w+">\w+<\/a> utters a light chant and raises his hands, beckoning the lesser spirits to his aid\.\.\./,							#Minor Spirit Spell Circle
    /<a exist="-\d+" noun="\w+">\w+<\/a> gestures while calling upon the lesser spirits for aid\.\.\./,														#Minor Spirit Spell Circle
	/A light blue glow surrounds you\./,																													#101 - 1st wear
	/A light blue glow leaves you\./,																														#101 - 1st remove
    /A light blue glow surrounds <a exist="-\d+" noun="\w+">\w+<\/a>\./,																					#101 - 3rd wear
	/The light blue glow leaves <a exist="-\d+" noun="\w+">\w+<\/a>\./,																						#101 - 3rd remove
	/The air thickens and begins to swirl around you\./,																									#102 - 1st wear
	/The air calms down around you\./,																														#102 - 1st remove
	/The air thickens and begins to swirl around <a exist="-\d+" noun="\w+">\w+<\/a>\./,																	#102 - 3rd wear
	/The air calms down around <a exist="-\d+" noun="\w+">\w+<\/a>\./,																						#102 - 3rd remove
	/You suddenly feel more powerful\./,																													#103 - 1st wear
	/The powerful look leaves you\./,																														#103 - 1st remove
    /<a exist="-\d+" noun="\w+">\w+<\/a> suddenly looks more powerful\./,																					#103 - 3rd wear
	/The powerful look leaves <a exist="-\d+" noun="\w+">\w+<\/a>\./,																						#103 - 3rd remove
	/A deep blue glow surrounds you\./,																														#107 - 1st wear
	/The deep blue glow leaves you\./,																														#107 - 1st remove
	/Deep blue motes swirl away from you and fade\./,																										#107 - 1st remove
    /A deep blue glow surrounds <a exist="-\d+" noun="\w+">\w+<\/a>\./,																						#107 - 3rd wear
	/The deep blue glow leaves <a exist="-\d+" noun="\w+">\w+<\/a>\./,																						#107 - 3rd remove
	/Deep blue motes swirl away from <a exist="-\d+" noun="\w+">\w+<\/a> and fade\./,																		#107 - 3rd remove
	/A misty halo surrounds you\./,																															#112 - 1st wear
	/The misty halo fades from you\./,																														#112 - 1st remove
	/A misty halo surrounds <a exist="-\d+" noun="\w+">\w+<\/a>\./,																							#112 - 3rd wear
	/The misty halo fades from <a exist="-\d+" noun="\w+">\w+<\/a>\./,																						#112 - 3rd remove
	/A dull golden nimbus surrounds you\./,																													#115 - 1st wear
	/The dull golden nimbus fades from around you\./,																										#115 - 1st remove
	/A dull golden nimbus surrounds <a exist="-\d+" noun="\w+">\w+<\/a>\./,																					#115 - 3rd wear
	/The dull golden nimbus fades from around <a exist="-\d+" noun="\w+">\w+<\/a>\./,																		#115 - 3rd remove
	/<a exist="-\d+" noun="\w+">\w+<\/a> suddenly looks a lot more powerful\./,																				#120
    /<a exist="-\d+" noun="\w+">\w+<\/a> appears considerably more powerful\./,																				#120
	/<a exist="-\d+" noun="\w+">\w+<\/a> is surrounded by a white light\./,																					#120
	/<a exist="-\d+" noun="\w+">\w+<\/a> traces a sign while petitioning the spirits for cognition\.\.\./,													#Major Spirit Spell Circle
	/<a exist="-\d+" noun="\w+">\w+<\/a> appears more secure\./,																							#204
    /<a exist="-\d+" noun="\w+">\w+<\/a> begins to breathe more deeply\./,																					#207
    /<a exist="-\d+" noun="\w+">\w+<\/a> begins to breathe less deeply\./,																					#207
	/<a exist="-\d+" noun="\w+">\w+<\/a> chants a reverent litany and clasps his hands while tightly focusing his thoughts\.\.\./,							#Cleric Spell Circle
	/<a exist="-\d+" noun="\w+">\w+<\/a> raises a hand while murmuring a soft orison\.\.\./,																#303
	/A pure white aura sparkles around <a exist="-\d+" noun="\w+">\w+<\/a>\./,																				#303
	/A pearlescent emanation extends outward to encompass <a exist="-\d+" noun="\w+">\w+<\/a> and those nearby\./,											#307
	/A wispy tendril of pure magic reaches out to encircle <a exist="-\d+" noun="\w+">\w+<\/a> and those nearby\./,											#310
	/Silver-laced indigo mist seeps from Erykk's eyes./,																									#313
    /The silvery luminescence fades from around <a exist="-\d+" noun="\w+">\w+<\/a>\./,																		#401
	/The bright luminescence fades from around <a exist="-\d+" noun="\w+">\w+<\/a>\./,																		#406
	/The brilliant luminescence fades from around <a exist="-\d+" noun="\w+">\w+<\/a>\./,																	#414
	/Glowing specks of \w+ begin to spin around <a exist="-\d+" noun="\w+">\w+<\/a>\./,																		#503
    /<a exist="-\d+" noun="\w+">\w+<\/a> suddenly stops moving light-footedly\./,																			#506
	/<a exist="-\d+" noun="\w+">\w+<\/a> makes a nearly imperceptible motion while whispering a soft phrase\.\.\./,											#Ranger Spell Circle
	/The air about <a exist="-\d+" noun="\w+">\w+<\/a> shimmers slightly\./,																				#602
	/<a exist="-\d+" noun="\w+">\w+<\/a> suddenly looks much more dextrous\./,																				#618
    /<a exist="-\d+" noun="\w+">\w+<\/a> becomes solid again\./,																							#911
    /The translucent sphere fades from around <a exist="-\d+" noun="\w+">\w+<\/a>\./,																		#919
)

silence = proc {
	action = proc { |server_string|
		if server_string.strip.length == 0
			nil
			next
		end
		if server_string =~ Spells_Squelch
			nil			
		else
			server_string
		end
	}
	DownstreamHook.add("#{script.name}_silence", action)
}

before_dying { 
	DownstreamHook.remove("#{script.name}_silence") 
}

loop {
	silence.call
	sleep 1
	}
