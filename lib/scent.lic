#Scent.lic
=begin

This script is intended to be used with a perfume organizer.

Variables used:
Vars.organizer = Name of scent organizer
Vars.scent_container = Name of container where scent organizer is stored

=end

no_kill_all
no_pause_all

def auto_application
	loop do
		line = get
		if line =~ /The subtle scent which had been clinging to you dissipates./
      if Script.running?('bigshot')
        Script.pause('scent')
        wait_while{Script.running?('bigshot')}
      end
      empty_hands
      fput "get my #{Vars.organizer} from my #{Vars.scent_container}"
      fput "whisper #{Vars.organizer} perfume #{number}"
      fput "pull my #{Vars.organizer}"
      fput "pour my bottle on #{Char.name}"
      fput "put my bottle in my #{Vars.organizer}"
      fput "put my #{Vars.organizer} in my #{Vars.scent_container}"
      fill_hands
		end
	end
end

if Vars.organizer.nil?
  respond 'You have not set the name of the scent organizer, please do so now.'
  respond 'Enter ;vars set organizer = organizername'
  Script.kill('scent')
else
  respond "Organizer set to #{Vars.organizer}"
end

if Vars.scent_container.nil?
  respond 'You have not set where the scent organizer is stored, please do so now.'
  respond 'Enter ;vars set scent_container = containername'
  Script.kill('scent')
else
  respond "Scent container set to #{Vars.scent_container}"
end

if Vars.organizer.nil?
  exit
elsif Vars.scent_container.nil?
  exit
end

if script.vars[1] =~ /apply/
	empty_hands
  if !script.vars[2].nil?
    number = script.vars[2]
  else
    number = 1
  end
	fput "get my #{Vars.organizer} from my #{Vars.scent_container}"
	fput "whisper #{Vars.organizer} perfume #{number}"
	fput "pull my #{Vars.organizer}"
	fput "pour my bottle on #{Char.name}"
	fput "put my bottle in my #{Vars.organizer}"
	fput "put my #{Vars.organizer} in my #{Vars.scent_container}"
	fill_hands
elsif script.vars[1] =~ /auto/
	auto_application
elsif script.vars[1] =~ /random/
  number = rand(10)
	empty_hands
	fput "get my #{Vars.organizer} from my #{Vars.scent_container}"
	fput "whisper #{Vars.organizer} perfume #{number}"
	fput "pull my #{Vars.organizer}"
	fput "pour my bottle on #{Char.name}"
	fput "put my bottle in my #{Vars.organizer}"
	fput "put my #{Vars.organizer} in my #{Vars.scent_container}"
	fill_hands
  
elsif script.vars.empty?
	echo 'What do you want to do?  Apply or Auto?'
  echo ';scent apply or ;scent auto'
end